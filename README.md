## Отчет по лабораторной работе № 2

#### № группы: `ПМ-2402`

#### Выполнил: `Балабан Даниил Вадимович`

#### Вариант: `2`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Описание классов и полей](#2-описание-классов-и-полей-)
- [Выбор структуры данных](#3-выбор-структуры-данных)
- [Алгоритм](#4-алгоритм)
- [Программа](#5-программа)
- [Анализ правильности решения](#6-анализ-правильности-решения)

## 1. Постановка задачи
> Разработать функционал для управления товарами с учетом истории изменения их цен,
включая работу с себестоимостью, проверку минимально допустимой цены и выполне
ние расчетов на основе цен. 

###  Создание товара
> Товар создается с заданным названием, себестоимостью и начальной ценой. Если
начальная цена ниже себестоимости, она автоматически устанавливается равной
себестоимости.
 
### Вывод информации о товаре
> Отображение названия, себестоимости и текущей цены товара.

###  Изменение цены товара
> Устанавливается новая цена товара. Если она ниже себестоимости, система выдает
предупреждение или автоматически устанавливает цену равной себестоимости

### Добавление наценки в процентах
> Увеличение текущей цены товара на заданный процент. Проверка, чтобы итоговая
цена не опустилась ниже себестоимости
 
### Применение скидки в процентах
> Уменьшение текущей цены товара на указанный процент. Обеспечение, что ито
говая цена не ниже себестоимости. 
 
### Изменение цены на фиксированное значение
> Увеличение или уменьшение цены товара на указанное число. Проверка ограни
чения на минимальную цену 

### Вычисление средней стоимости товара
> Возвращает среднюю цену на основе истории изменения цен 
 
### Определение средней наценки
> Рассчитывает среднюю наценку относительно себестоимости на основе истории
изменения цен.
 
### Расчет возможной выручки
> Определяет сумму, которую можно получить, если продать указанное количество
товара по текущей цене. 

### Разрешение продаж ниже себестоимости
> Добавление флага, который позволяет устанавливать цену ниже себестоимости.
Флаг по умолчанию установлен в false.

###  История изменения цен
> Хранение массива истории изменений цены. Включает текущую цену и ограни
ченное количество предыдущих значений.
 
### Печать истории цен
> Вывод истории изменения цен в виде массива для визуализации 

### Конструктор только по названию и себестоимости
> Реализация конструктора для создания товара только с указанием его названия
и себестоимости. Цена в этом случае устанавливается равной себестоимости.

 
## 2. Описание классов и полей. 
#### Для реализации функционала создан 1 класс "Product"
>Класс "Product" содержит в себе название товара, его себестоимость, его цену, счетчик изменения цены, массив с ценами и флаг, по умолчанию стоящий false.
>1. Поле "name" содержит название товара.
>2. Поле "cost" содержит себестоимость товара.
>3. Поле "price" содержит цену товара.
>4. Поле "k" содержит количество изменений товара.
>5. Поле "m" содержит массив с историей изменений цен.
>6. Поле "f" содержит флаг, влияющий на возможность ситуации cost > price.



## 3. Документация.

### 1. Конструкторы классов.
 * Product(String name, double cost, double price) - создание объекта класса Product с указанием имени, себестоимости и цены.
 * Product (String name, double cost) - создание объекта класса Product с указанием имени и себестоимости.
### 2. Методы классов.
* newPrice - задает новую цену для товара, она должная быть больше себестоимости, но может быть меньше если флаг = true.
* markup - применяет наценку на товар.
* sale - применяет скидку на товар, цена после должна быть больше себестоимости, но может быть меньше если флаг = true.
* changePrice - изменяет цену товара, цена после должна быть больше себестоимости, но может быть меньше если флаг = true.
* averagePrice - находит среднюю цену с помощью массива истории цен.
* averageMarkup - находит среднюю наценку с помощью массива истории цен.
* revenue - находит возможную выручку.
* belowCost - позволяет пользователю дать разрещение на меньшую стоимость цены относительно себестоимости.
* historyPrice - выводит на экран массив истории цен.


### 3. Код класса "Product":
```java
class Product {
    private String name;
    private double cost;
    private double price;
    private int k = 0;
    private double [] m = new double [30];
    private boolean f = false;
    //Добавление товара
    public Product(String name, double cost, double price) {
        this.name = name;
        if (cost > 0) {
            this.cost = cost;
        } else {
            this.cost = 0;
        }
        if (price > 0) {
            this.price = price;
        } else {
            this.price = 0;
        }
        if (cost > price && !f) {
            this.price = this.cost;
        }
        m[k] = price;
        k += 1;
    }
    //Создание новой цены
    public void newPrice(double price) {
        if (cost < price || f) {
            this.price = price;
        } else {
            price = cost;
        }
        m[k] = price;
        k += 1;
    }
    //Наценка
    public void markup(double x) {
        price = price * (1 + x / 100);
        m[k] = price;
        k += 1;
    }

    //Скидка;
    public void sale(double x) {
        if (cost < price * (1 - x / 100) || f) {
            price = price * (1 - x / 100);
        } else {
            price = cost;
        }
        m[k] = price;
        k += 1;
    }

    //Изменение цены;
    public void changePrice(double x) {
        if (cost < price + x || f) {
            price = price + x;
        } else {
            price = cost;
        }
        m[k] = price;
        k += 1;
    }

    //Средняя цена;
    public double averagePrice() {
        double st = 0;
        for (int i = 0; i < m.length; i++) {
                st += m[i];
        }
        return st / k;
    }

    //Средняя наценка;
    public double averageMarkup() {
        double st = 0;
        for (int i = 0; i < m.length; i++) {
            if (m[i] != 0) {
                st += m[i] - cost;
            }
        }
        return st / k;
    }

    //Возможная выручка;
    public double revenue(double x) {
        return x * price;
    }

    //Разрешение на стоимость ниже себестоимости;
    public void belowCost(boolean f) {
        this.f = f;
    }

    //Печать истории цен;
    public void historyPrice() {
        int st = 0;
        System.out.print("[");
        for (int i = 0; i < m.length; i++) {
            if (st == k - 1) {
                System.out.print(m[i] + "]");
                break;
            }
            if (m[i] != 0) {
                System.out.print(m[i] + ", ");
                st += 1;
            }
        }
    }
    //Добавление товара по 2 параметрам;
    public Product(String name, double cost) {
        this.name = name;
        this.cost = cost;
        price = cost;
    }
    //Настройка вывода через print;
    @Override
    public String toString() {
        return "Товар - " + name + " - " + cost + " - " + price;
    }
}
```






### 4. Код для теста и ввода с клавиатуры:

```java
import java.io.PrintStream;
import java.util.Scanner;

public class Main {
   public static Scanner in = new Scanner(System.in);
   public static PrintStream out = System.out;
   public static void main(String[] args) {
      Product [] a = new Product[1000];
      int st = 0;
      boolean f = true;
      while (f) {
         out.println("Введите номер действия:");
         out.println("Добавить товар - 1");
         out.println("Редактировать товар - 2");
         if (in.nextInt() == 1) {
            out.println("Создать с помощью названия, себестоимости, цены - 1");
            out.println("Создать с помощью названия и себестоимости - 2");
            if (in.nextInt() == 1) {
               out.println("Введите данные:");
               Product y = new Product(in.next(), in.nextDouble(), in.nextDouble());
               a[st] = y;
            } else {
               out.println("Введите данные:");
               Product y = new Product(in.next(), in.nextDouble());
               a[st] = y;
            }
            st += 1;
            continue;
         } else {
            out.print("Введите номер товара: ");
            out.println();
            int num = in.nextInt() - 1;
            out.println(a[num]);
            out.println("Список доступных действий, введите номер:");
            out.println("Создание новой цены - 1");
            out.println("Создание наценки - 2");
            out.println("Создание скидки - 3");
            out.println("Изменить цену - 4");
            out.println("Средняя цена - 5");
            out.println("Средняя наценка - 6");
            out.println("Возможная выручка - 7");
            out.println("Разрешение на стоимость ниже себестоимости - 8");
            out.println("История изменения цен - 9");
            out.println("Конец - 10");
            int t = 0;
            while (t != 10) {
               t = in.nextInt();
               if (t == 1) {
                  out.print("Введите значение: ");
                  a[num].newPrice(in.nextDouble());
                  out.println(a[num]);
                  out.println("Введите номер:");
               } else if (t == 2) {
                  out.print("Введите значение: ");
                  a[num].markup(in.nextDouble());
                  out.println(a[num]);
                  out.println("Введите номер:");
               } else if (t == 3) {
                  out.print("Введите значение: ");
                  a[num].sale(in.nextDouble());
                  out.println(a[num]);
                  out.println("Введите номер:");
               } else if (t == 4) {
                  out.print("Введите значение: ");
                  a[num].changePrice(in.nextDouble());
                  out.println(a[num]);
                  out.println("Введите номер:");
               } else if (t == 5) {
                  out.println(a[num].averagePrice());
                  out.println("Введите номер:");
               } else if (t == 6) {
                  out.println(a[num].averageMarkup());
                  out.println("Введите номер:");
               } else if (t == 7) {
                  out.print("Введите значение: ");
                  out.println(a[num].revenue(in.nextDouble()));
                  out.println("Введите номер:");
               } else if (t == 8) {
                  out.print("Введите true или false: ");
                  a[num].belowCost(in.nextBoolean());
                  out.println("Успешно!");
                  out.println("Введите номер:");
               } else if (t == 9) {
                  a[num].historyPrice();
                  out.println();
                  out.println("Введите номер:");
               }
            }
         }
      }
      out.print("Конец");
   }
}
```

### 5. Анализ правильности решения

Создадим 2 товара с помощью разных конструкторов и применим на каждом все методы. Так как программа выводит сразу все данные товара, я не стал разделять на вход и выход. 

#### 1. Тест на конструкторе с 3 параметрами:
```
Введите номер действия:
Добавить товар - 1
Редактировать товар - 2
1
Создать с помощью названия, себестоимости, цены - 1
Создать с помощью названия и себестоимости - 2
1
Введите данные:
Молоко 60 100
Введите номер действия:
Добавить товар - 1
Редактировать товар - 2
2
Введите номер товара:
1
Товар - Молоко - 60.0 - 100.0
Список доступных действий, введите номер:
Создание новой цены - 1
Создание наценки - 2
Создание скидки - 3
Изменить цену - 4
Средняя цена - 5
Средняя наценка - 6
Возможная выручка - 7
Разрешение на стоимость ниже себестоимости - 8
История изменения цен - 9
Конец - 10
1
Введите значение: 150
Товар - Молоко - 60.0 - 150.0
Введите номер:
2
Введите значение: 50
Товар - Молоко - 60.0 - 225.0
Введите номер:
3
Введите значение: 30
Товар - Молоко - 60.0 - 157.5
Введите номер:
4
Введите значение: 150
Товар - Молоко - 60.0 - 307.5
Введите номер:
5
188.0
Введите номер:
6
128.0
Введите номер:
7
Введите значение: 10
3075.0
Введите номер:
8
Введите true или false: true
Успешно!
Введите номер:
9
[100.0, 150.0, 225.0, 157.5, 307.5]
Введите номер:
10
Введите номер действия:
Добавить товар - 1
Редактировать товар - 2
```

#### 2. Тест на конструкторе с 2 параметрами:


```
Введите номер действия:
Добавить товар - 1
Редактировать товар - 2
1
Создать с помощью названия, себестоимости, цены - 1
Создать с помощью названия и себестоимости - 2
2
Введите данные:
Молоко 100
Введите номер действия:
Добавить товар - 1
Редактировать товар - 2
2
Введите номер товара: 
2
Товар - Молоко - 100.0 - 100.0
Список доступных действий, введите номер:
Создание новой цены - 1
Создание наценки - 2
Создание скидки - 3
Изменить цену - 4
Средняя цена - 5
Средняя наценка - 6
Возможная выручка - 7
Разрешение на стоимость ниже себестоимости - 8
История изменения цен - 9
Конец - 10
1
Введите значение: 150
Товар - Молоко - 100.0 - 150.0
Введите номер:
2
Введите значение: 60
Товар - Молоко - 100.0 - 240.0
Введите номер:
3
Введите значение: 50
Товар - Молоко - 100.0 - 120.0
Введите номер:
4
Введите значение: -30
Товар - Молоко - 100.0 - 100.0
Введите номер:
5
152.5
Введите номер:
6
52.5
Введите номер:
7
Введите значение: 12
1200.0
Введите номер:
8
Введите true или false: true
Успешно!
Введите номер:
9
[150.0, 240.0, 120.0, 100.0]
Введите номер:
10
Введите номер действия:
Добавить товар - 1
Редактировать товар - 2
```
